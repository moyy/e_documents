# FAQ：常见问题

## 1. 问题：看到背后的东西，怎么办？

+ 查 [混合](./03_blend.md)
+ 查 深度 检测函数
	- 随时打开 `深度测试`
	- 根据情况选择：`小于等于`，或 `小于`
+ 查 排序
	- 不透明：前 --> 后
		* `深度写`：打开
		* 深度测试：打开
	-   透明：后 --> 前
		* `深度写`：关闭
		* 深度测试：打开
+ 查 shader，有没有 `discard`

## 2. 问题：特效 叠加 效果 不尽如人意

+ 查 [混合](./03_blend.md)
	- 注意：`预乘` 场合，alpha的处理 和 常规的 不同

## 3. 问题：图片采样 有异常

+ 查 [纹理采样](./07_sampler.md)
	- 注意：非2的冥 尺寸 纹理
+ 图片边缘有锯齿：查 [纹理采样-透明边缘](./07_sampler.md)

## 4. 问题：对 渲染目标 的 部分过滤

+ 查 [视口 和 裁剪](./04_viewport.md)

## 5. 问题：纹理 采样 成 黑色？

+ 尺寸 是不是 非2的冥：[纹理采样](./07_sampler.md)
+ 纹理坐标 有没有 问题
+ 尺寸是2的冥 && 过滤用了 _mipmap_，那么 generatemipmap 有没有问题

## 6. 问题：慢速运动 图片抖动？

+ 因为 纹理采样没有 采样到 像素点（整数坐标）
+ 目前没有 太好的解决办法
+ 上网搜：0.5像素 采样

## 7. 问题： 脏区域 使用 导致 的 花屏

+ FBO：永远是 单缓冲
	- `注：` FBO是不会在底层开双缓冲的！
+ canvas的 getContext("webgl", options) 有一个属性：`preserveDrawingBuffer`
	- 如 `preserveDrawingBuffer` 为true缓冲区将不会被清除，会保存下来，直到被清除或被使用者覆盖。
	- `注：` 不是 所有 宿主平台 都 支持 这个 特性 ！

## 8. 问题：为什么 `深度缓冲区` 的值是 [0, 1]

+ VS输出的位置坐标，在Opengl标准中 xyz的范围，都是 [-1, 1]，这个立方体，称为：`NDC`(标准化设备坐标)
	- 注：`DX` 中，`NDC` 的范围和OpenGL不一样；
+ [-1, 1] 外的点，被裁剪掉；或者被 切分成若干三角形
+ 光栅化时：
	- xy经过：gl.viewport 做视口变换；
	- z 经过 gl.depthRange(near, far); 将 [-1, 1] --> [near, far] 其中 0 <= near < far <= 1
	- 变换后的值，写到 `深度缓冲区`
	- 因此：`深度缓冲区` 的值，在 [0, 1]

